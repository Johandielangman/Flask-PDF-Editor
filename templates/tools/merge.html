{% extends 'base.html' %}

{% block title %}
  {{ title }}
{% endblock %}

{% block header %}
<script src="https://unpkg.com/htmx.org@1.7.0"></script>
{% endblock %}

{% block content %}
  {% with messages = get_flashed_messages() %}
   {% if messages %}
      {% for message in messages %}
         {{ message }}
      {% endfor %}
   {% endif %}
{% endwith %}
<h1 class="block-effect" style="--td: 0.5s">
  <div class="block-reveal" style="--bc: linear-gradient(to right, rgb(4,170,109,0.5), rgb(4,170,109,1)); --d: .1s">Merge your PDFs!</div>
</h1>
<form method=post enctype=multipart/form-data> 
  <div class="radius">
    <div class="container">
      <h3>Choose your files and merge!</h3>
      <input type="file" name="file" required multiple>
      <input class="mybutton" type=submit value=Merge! hx-indicator="#poller">
      <p id="output_api"></p>
    </div>
  </div>
</form>
<p>Your session ID: {{ thread_id }}</p>
<p id="poller" hidden hx-get="/getprogress/{{ title }}/{{ thread_id }}" hx-target="#output_api" hx-trigger="every 1s">Chuck Joke</p>

{% endblock %}